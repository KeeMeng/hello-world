<!DOCTYPE html>
<html>
	<head>
		<title>Points Counter</title>
		<link rel="stylesheet" href="hackku/theme.css">
		<link rel="stylesheet" href="hackku/buttons.css">
		<!-- <script src="hackku/mode.js"></script> -->
	</head>
	<body style= "text-align: center; font-family: Futura; font-weight: bold;" onload="load()">
		<script type="text/javascript">

			var clicks = [100,500,1000,100,300,800];
			var clicks2 = [100,500,1000,100,300,800];
			var timer = 30;

			function time() { 
				timer --;
				document.getElementById("timer").innerHTML = timer;
				if (timer <= 0) {
					clearInterval(repeat);
				}
			}

			var repeat = setInterval(time, 60000);
			function change_time() {
				var x = prompt("Please enter timer (minutes)", timer);
				if (x > 0) {
					timer = x;
					document.getElementById("timer").innerHTML = timer;
				}
			}

			function change_title() {
				var title = prompt("Title:", "Computer Science Society")
				if (title !== "" && title !== null) {
					document.getElementById("title").innerHTML = title;
				}
			}

			var animate = true;
			function animation() {
				animate = !animate;
			}

			function swap(number) {
				document.getElementById("checkbox1").checked = false;
				document.getElementById("checkbox2").checked = false;
				document.getElementById("checkbox3").checked = false;
				document.getElementById("checkbox4").checked = true;
				document.getElementById("checkbox5").checked = true;
				document.getElementById("checkbox6").checked = true;

				if (number == 1 || number == 2 || number == 3) {
					document.getElementById("restriction"+String(number)).style.display = "block";
					document.getElementById("checkbox"+String(number)).style.display = "none";
				}
				else if (number == 4 || number == 5 || number == 6) {
					document.getElementById("restriction"+String(number-3)).style.display = "none";
					document.getElementById("checkbox"+String(number-3)).style.display = "inline";
				}
			}

			function half(event, number) {
				clicks[number-1] = Math.floor(clicks[number-1]/2);
				if (event.shiftKey) {
					clicks2[number-1] = clicks[number-1];
					document.getElementById("clicks"+String(number)).innerHTML = clicks[number-1];
				}
			}

			function change() {
				if (animate) {
					for (var i = 0; i < 6; i++) {
						if (clicks2[i] > clicks[i]) {
							clicks2[i] --;
							document.getElementById("clicks"+String(i+1)).innerHTML = clicks2[i];
						}
						else if (clicks2[i] < clicks[i]) {
							clicks2[i] ++;
							document.getElementById("clicks"+String(i+1)).innerHTML = clicks2[i];
						}
					}
				}
				else {
					clicks2 = clicks.slice();
					document.getElementById("clicks1").innerHTML = 100;
					document.getElementById("clicks2").innerHTML = 500;
					document.getElementById("clicks3").innerHTML = 1000;
					document.getElementById("clicks4").innerHTML = 100;
					document.getElementById("clicks5").innerHTML = 300;
					document.getElementById("clicks6").innerHTML = 800;
				}
				if (clicks.join(",") != "100,500,1000,100,300,800" || clicks2.join(",") != "100,500,1000,100,300,800") {
					document.getElementById("resetbutton").style.display = "block";
				}
				else {
					document.getElementById("resetbutton").style.display = "none";
					document.getElementById("reset_tip").innerHTML = "Reset Points";
				}
			}

			setInterval(change,0);

			function reset(event) {
				document.getElementById("reset_tip").innerHTML = "Reset Points";
				if (event.shiftKey) {
					clicks = [100,500,1000,100,300,800];
					document.getElementById("reset_tip").innerHTML = "Reset Points";
				}
				if (clicks2[0] < clicks[0] || clicks2[1] < clicks[1] || clicks2[2] < clicks[2] || clicks2[3] < clicks[3] || clicks2[4] < clicks[4] || clicks2[5] < clicks[5]) {
					clicks2 = [100,500,1000,100,300,800];
					document.getElementById("clicks1").innerHTML = 100;
					document.getElementById("clicks2").innerHTML = 500;
					document.getElementById("clicks3").innerHTML = 1000;
					document.getElementById("clicks4").innerHTML = 100;
					document.getElementById("clicks5").innerHTML = 300;
					document.getElementById("clicks6").innerHTML = 800;
					document.getElementById("reset_tip").innerHTML = "Reset Points";
					document.getElementById("resetbutton").style.display = "none";
				}
				else {
					document.getElementById("reset_tip").innerHTML = "Click again to quickly reset points";
					clicks = [100,500,1000,100,300,800];
				}
			}

			var dark = localStorage.getItem("mode");
			function dark_mode() {
				if (dark == "light") {
					dark = "dark";
					localStorage.setItem("mode", "dark");
				}
				else if (dark == "dark") {
					dark = "light";
					localStorage.setItem("mode", "light");
				}
				if (dark == "dark") {
					document.getElementById("mode").innerHTML = "Light Mode";
					document.getElementById("wrapper").style.backgroundColor = "#102344";
				}
				else if (dark == "light") {
					document.getElementById("mode").innerHTML = "Dark Mode";
					document.getElementById("wrapper").style.backgroundColor = "#e4f8ff";
				}
				document.body.classList.toggle("darkmode");
				document.body.classList.toggle("lightmode");
			}

			function load() {
				document.body.style.transitionDuration = "0s";
				document.getElementById("wrapper").style.transitionDuration = "0s";
				if (dark == "dark") {
					document.body.classList.toggle("darkmode");
					document.getElementById("mode").innerHTML = "Light Mode";
					document.getElementById("wrapper").style.backgroundColor = "#102344";
				}
				else if (dark == "light") {
					document.body.classList.toggle("lightmode");
					document.getElementById("mode").innerHTML = "Dark Mode";
					document.getElementById("wrapper").style.backgroundColor = "#e4f8ff";
				}
				setTimeout(add_transition,500);
			}

			function add_transition() {
				document.body.style.transitionDuration = "0.5s";
				document.getElementById("wrapper").style.transitionDuration = "0.5s";
			}


			var showhint = false;
			function show_hint() {
				showhint = !showhint;
				if (showhint) {
					document.getElementById("hint_box").style.display = "block";
				}
				else {
					document.getElementById("hint_box").style.display = "none";
				}
			}

		</script>

		<style>
			.button {
				padding: 10px 10px;
				font-family: Futura;
				font-size: 32px;
				outline: none;
				color: #004990;
				border: none;
				border-radius: 15px;
				width: 750px;
				margin: auto;
				display: block;
				-webkit-transform: perspective(1px);
				transform: perspective(1px);
				-webkit-transition-duration: 0.2s;
				transition-duration: 0.2s;
				-webkit-transition-property: transform;
				transition-property: transform;
			}

			.button:hover, .button:focus {
				-webkit-transform: scale(1.05);
				transform: scale(1.05);
			}

			.button:active {
				-webkit-animation-duration: 0.1s;
				animation-duration: 0.1s;
				-webkit-transform: scale(1.08);
				transform: scale(1.08);
			}

			.small_button2 {
				padding: 5px 5px;
				font-family: Futura;
				font-size: 16px;
				outline: all;
				border: none;
				border-radius: 8px;
				margin: auto;
				display: block;
				vertical-align:middle;
				-webkit-transform: perspective(1px);
				transform: perspective(1px);
				-webkit-transition-duration: 0.2s;
				transition-duration: 0.2s;
				-webkit-transition-property: transform;
				transition-property: transform;
			}

			.small_button2:hover, .small_button2:focus {
				-webkit-transform: scale(1.05);
				transform: scale(1.05);
			}

			.small_button2:active {
				-webkit-animation-duration: 0.1s;
				animation-duration: 0.1s;
				-webkit-transform: scale(1.08);
				transform: scale(1.08);
			}

			.textbox2 {
				box-shadow: 0px;
				-webkit-transition-duration: 0.2s;
				transition-duration: 0.2s;
				-webkit-transition-property: box-shadow;
				transition-property: box-shadow;
				padding-left: 4px;
				box-shadow: inset 0 0 0 0px transparent;
				border-radius: 0px;
				font-family: Futura; 
				font-size: 16px; 
				color: inherit; 
				width: 600px; 
				border-top-style: hidden; 
				border-right-style: hidden; 
				border-left-style: hidden; 
				border-bottom-style: solid; 
				background-color: transparent;
			}
			.textbox2:hover, .textbox2:focus, .textbox2:active {
				box-shadow: inset 0 0 0 2px;
				border-radius: 5px;

			}

		</style>

		<button class="small_button" onclick="window.location.href='index.html';">Homepage</button>
		<button id="mode" class="small_button" style="text-align: left; top: 50px; font-size:16px;" onclick="dark_mode()">Dark Mode</button>
		<button class="small_button" style="right: calc(100% - 48px);;" onmousedown="show_hint()">Hint</button>
		<div id="hint_box" style="color: inherit; background-color: transparent; text-align: left; position: absolute; top: 42px; left:10px; display: none; ">
			Top middle checkbox to toggle animation<br>
			Click the time to change the timer<br>
			Click the other checkboxes to show/hide restrictions<br>
			Shift click challenges button to deduct points immediately<br>
			Shift click reset button to reset immediately<br>
		</div>
		<div style="font-size: 48px;" onmousedown="change_title()">
			<span id="title">Computer Science Society</span>
		</div>
		<input checked type="checkbox" onmousedown="animation()" style="opacity:0.5">

		<div style="font-size: 36px;" onmousedown="change_time()">
			<span id="timer">30</span> minutes left
		</div>
		<hr>
		<div id="wrapper" style="transition: 0.5s; margin: auto; margin-top: 20px; padding-top: 10px; width: 820px; align-content: center; border-radius: 40px">
			<br>
			<button class="button" style="background-color: #b3e3ff;" onmousedown="half(event,1)">
				Beginner Challenge: <span id="clicks1" style="font-weight: bold">100</span> Points
			</button>
			<div id="restriction1" style="display: none;">
				<br>
				<button class="button" style="background-color: #b3e3ff;" onmousedown="half(event,4)">
					Beginner Challenge Restriction: <span id="clicks4" style="font-weight: bold">100</span> Points
				</button>
				<input id="checkbox4" type="checkbox" onmousedown="swap(4)" style="opacity:0.5">
				Restriction: <input type="text" class="textbox2">
			</div>
			<p style="font-size: 1px"></p>
			<input id="checkbox1" type="checkbox" onmousedown="swap(1)" style="opacity:0.5">
			<br><br>
			<button class="button" style="background-color: #66ccff;" onmousedown="half(event,2)">
				Intermediate Challenge: <span id="clicks2" style="font-weight: bold">500</span> Points
			</button>
			<div id="restriction2" style="display: none;">
				<br>
				<button class="button" style="background-color: #66ccff;" onmousedown="half(event,5)">
					Intermediate Challenge Restriction: <span id="clicks5" style="font-weight: bold">300</span> Points
				</button>
				<input id="checkbox5" type="checkbox" onmousedown="swap(5)" style="opacity:0.5">
				Restriction: <input type="text" class="textbox2">
			</div>
			<p style="font-size: 1px"></p>
			<input id="checkbox2" type="checkbox" onmousedown="swap(2)" style="opacity:0.5">
			<br><br>
			<button class="button" style="background-color: #22b8ff;" onmousedown="half(event,3)">
				Advanced Challenge: <span id="clicks3" style="font-weight: bold">1000</span> Points
			</button>
			<div id="restriction3" style="display: none;">
				<br>
				<button class="button" style="background-color: #22b8ff;" onmousedown="half(event,6)">
					Advanced Challenge Restriction: <span id="clicks6" style="font-weight: bold">800</span> Points
				</button>
				<input id="checkbox6" type="checkbox" onmousedown="swap(6)" style="opacity:0.5">
				Restriction: <input type="text" class="textbox2">
			</div>
			<p style="font-size: 1px"></p>
			<input id="checkbox3" type="checkbox" onmousedown="swap(3)" style="opacity:0.5">
			<br><br>
			<div id="resetbutton" style="display: none;">
				<button class="button" style="background-color: #ff8080; color: #800000" onmousedown="reset(event)">
					<span id="reset_tip">Reset Points</span>
				</button>
				<br>
			</div>
		</div>
		<br>
	</body>
</html>